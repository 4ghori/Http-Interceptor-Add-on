"use strict";function setTabRequestLog(e,t){chrome.storage.local.get(e,function(a){a[e]?a[e].push(t):(a[e]=[],a[e].push(t)),chrome.storage.local.set(a)})}function getParameterByName(e,t){e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),r=a.exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}var activeTab={windowId:-1,tabId:-1},popupTemplate,popupData={warningclass:"hide",rLog:""};chrome.runtime.onInstalled.addListener(function(e){chrome.storage.local.set({activeTab:{windowId:-1,tabId:-1}}),console.log("previousVersion",e.previousVersion)}),chrome.tabs.query({active:!0},function(e){chrome.storage.local.clear(),chrome.storage.local.set({activeTab:{windowId:e[0].windowId,tabId:e[0].tabId}}),activeTab={windowId:e[0].windowId,tabId:e[0].tabId}}),chrome.tabs.onActivated.addListener(function(e){chrome.storage.local.set({activeTab:{windowId:e.windowId,tabId:e.tabId}}),activeTab={windowId:e.windowId,tabId:e.tabId}}),chrome.tabs.onUpdated.addListener(function(e,t){t.url||(chrome.browserAction.setBadgeText({text:"",tabId:e}),chrome.storage.local.remove(e.toString()))}),chrome.tabs.onRemoved.addListener(function(e,t){chrome.browserAction.setBadgeText({text:"",tabId:e}),chrome.storage.local.remove(e.toString())}),chrome.webRequest.onBeforeRequest.addListener(function(e){var t="0000000";if(e.tabId==activeTab.tabId&&e.url.includes("rya")&&e.url.includes("placeguid")){var a=activeTab.tabId.toString(),r=getParameterByName("placeguid",e.url);if(r!=t){var o={placeguid:getParameterByName("placeguid",e.url),url:e.url,type:"warning"};setTabRequestLog(a,o),chrome.browserAction.setBadgeText({text:"!",tabId:e.tabId})}else{var o={placeguid:getParameterByName("placeguid",e.url),url:e.url,type:"success"};setTabRequestLog(a,o),chrome.browserAction.setBadgeText({text:"!",tabId:e.tabId})}return{redirectUrl:e.url.replace(/(placeguid=).*?(&|$)/,"$1"+t+"$2")}}},{urls:["<all_urls>"],types:["main_frame","sub_frame"]},["blocking"]);
//# sourceMappingURL=background.js.map
